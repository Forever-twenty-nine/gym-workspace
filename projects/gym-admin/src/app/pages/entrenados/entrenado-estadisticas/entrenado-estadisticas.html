<div class="w-full p-4">

	@if (estadisticas()) {
		<div class="space-y-6">
			<div class="bg-white rounded-lg shadow-md p-6">
								<div class="flex flex-col gap-4 mb-6">
									<div class="flex flex-col md:flex-row md:items-center md:justify-between w-full gap-4">
										<div class="flex items-center gap-4 flex-1 min-w-0">
											<h3 class="text-3xl font-extrabold text-slate-800 flex items-center gap-3 whitespace-nowrap">
												<svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
													<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
												</svg>
												Estadísticas del Entrenado
											</h3>
											<div class="flex flex-row flex-wrap gap-6 ml-6">
												<div class="flex flex-col items-center min-w-20">
													<span class="text-3xl font-extrabold text-blue-600">{{ estadisticas().nivel }}</span>
													<span class="text-sm text-slate-500 font-medium">Nivel</span>
												</div>
												<div class="flex flex-col items-center min-w-20">
													<span class="text-3xl font-extrabold text-green-600">{{ estadisticas().totalRutinasCompletadas }}</span>
													<span class="text-sm text-slate-500 font-medium">Completadas</span>
												</div>
												<div class="flex flex-col items-center min-w-20">
													<span class="text-3xl font-extrabold text-orange-600">{{ estadisticas().rachaActual }}</span>
													<span class="text-sm text-slate-500 font-medium">Racha</span>
												</div>
												<div class="flex flex-col items-center min-w-20">
													<span class="text-3xl font-extrabold text-purple-600">{{ estadisticas().experiencia }}</span>
													<span class="text-sm text-slate-500 font-medium">XP</span>
												</div>
											</div>
										</div>
										<div class="relative group flex items-center mt-4 md:mt-0">
																			<a [routerLink]="['/entrenados']" title="Volver a Entrenados" aria-label="Volver a Entrenados"
																				class="p-3 bg-blue-50 text-blue-700 rounded-md border-2 border-blue-300 hover:bg-blue-600 hover:text-white transition-colors duration-150 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-300 flex items-center justify-center">
																				<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
																					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
																				</svg>
																			</a>
											<span class="absolute bottom-full mb-2 left-1/2 transform -translate-x-1/2 px-2 py-1 text-xs bg-gray-800 text-white rounded opacity-0 group-hover:opacity-100 transition-opacity duration-150 pointer-events-none">
												Volver a Entrenados
											</span>
										</div>
									</div>
								</div>
			</div>

			<!-- Lista de rutinas completadas -->
			<div class="bg-green-50 rounded-xl shadow-inner p-6">
				<h4 class="text-lg font-semibold text-green-700 mb-3 flex items-center gap-2">
					<svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
					</svg>
					Rutinas completadas
				</h4>
				@if (rutinasCompletadasConNombre().length > 0) {
					<ul class="divide-y divide-green-100">
						@for (progreso of rutinasCompletadasConNombre(); track progreso.id) {
							<li class="flex items-center justify-between px-4 py-3">
								<div class="flex flex-col">
									<span class="font-medium text-green-900">{{ progreso.nombre }}</span>
									<span class="text-xs text-green-700">Completada el {{ progreso.fechaFin | date:'dd/MM/yyyy' }}</span>
									<span class="text-xs text-green-500">Duración: {{ progreso.duracion }} segundos</span>
									<span class="text-xs text-green-400">{{ progreso.descripcion }}</span>
								</div>
								<span class="inline-flex items-center px-2 py-1 text-xs font-semibold bg-green-200 text-green-800 rounded-full ml-2">100%</span>
							</li>
						}
					</ul>
				} @else {
					<p class="text-sm text-green-700 italic">No hay rutinas completadas aún.</p>
				}
			</div>
		</div>
	}
	<div class="mt-8 mb-2 bg-blue-50 border border-blue-200 rounded-xl p-4 shadow-sm">
		<h4 class="text-base font-semibold text-blue-800 mb-2 flex items-center gap-2">
			<svg class="w-4 h-4 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
				<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01" />
			</svg>
			¿Cómo se calculan estas estadísticas?
		</h4>
		<ul class="text-xs text-blue-900 list-disc pl-5 space-y-1">
			<li><b>Nivel</b>: Sube cada 100 XP acumulados.</li>
			<li><b>Completadas</b>: Número total de sesiones de rutina finalizadas al 100%.</li>
			<li><b>Racha</b>: Días consecutivos con al menos una sesión completada.</li>
			<li><b>XP</b>: 10 puntos por cada sesión completada.</li>
		</ul>
	</div>
</div>
