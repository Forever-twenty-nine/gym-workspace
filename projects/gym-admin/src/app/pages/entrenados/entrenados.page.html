<div class="container mx-auto px-4 py-8">
  <h1 class="text-3xl font-bold text-white mb-6">Entrenados</h1>
  
  <section class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    <!-- Card de Entrenados -->
    <app-generic-card
      [config]="entrenadosCardConfig"
      [items]="entrenados()"
      [idField]="'id'"
      [canCreate]="false"
      (edit)="openDetailsModal($event)"
      (delete)="deleteEntrenado($event)">
    </app-generic-card>

    <!-- Card de Ejercicios -->
    <app-generic-card
      [config]="ejerciciosCardConfig"
      [items]="ejercicios()"
      [idField]="'id'"
      (create)="addSampleEjercicio()"
      (edit)="openEjercicioModal($event)"
      (delete)="deleteEjercicio($event)">
    </app-generic-card>

    <!-- Card de Rutinas -->
    <app-generic-card
      [config]="rutinasCardConfig"
      [items]="rutinas()"
      [idField]="'id'"
      (create)="addSampleRutina()"
      (edit)="openRutinaModal($event)"
      (delete)="deleteRutina($event)">
    </app-generic-card>

    <!-- Card de Mensajes -->
    <app-generic-card
      [config]="mensajesCardConfig"
      [items]="mensajesFiltrados()"
      [idField]="'id'"
      [canCreate]="false"
      (edit)="openMensajeModal($event)"
      (delete)="deleteMensaje($event)">
    </app-generic-card>
  </section>

  <!-- Modal de detalles del entrenado -->
  <app-modal-form
    [isOpen]="isModalOpen()"
    [modalType]="'entrenado'"
    [isCreating]="isCreating()"
    [form]="editForm()"
    [formFields]="getFormFields()"
    [ejercicios]="[]"
    [selectedEjercicios]="[]"
    [isLoading]="isLoading()"
    [showCustomAction]="!isCreating() && modalData() !== null"
    [customActionLabel]="'Enviar Mensaje'"
    [customActionIcon]="'ğŸ’¬'"
    (close)="closeModal()"
    (save)="saveChanges()"
    (customAction)="addMensaje()"
    (marcarNotificacionLeida)="marcarNotificacionComoLeida($event)"
    (verMensaje)="abrirMensaje($event)"
    (responderMensaje)="responderMensaje($event)"
    (verConversacion)="abrirConversacion($event)"
    (marcarConversacionLeida)="marcarConversacionLeida($event)"
    (responderConversacion)="responderConversacion($event)"
    (aceptarInvitacion)="aceptarInvitacion($event)"
    (rechazarInvitacion)="rechazarInvitacion($event)"
    (toggleDiaSemana)="onToggleDiaSemana($event)"
    (toggleEjercicio)="toggleEjercicio($event)">
  </app-modal-form>

  <!-- Modal de ejercicios -->
  <app-modal-form
    [isOpen]="isEjercicioModalOpen()"
    [modalType]="'ejercicio'"
    [isCreating]="isEjercicioCreating()"
    [form]="ejercicioEditForm()"
    [formFields]="getEjercicioFormFields()"
    [ejercicios]="[]"
    [selectedEjercicios]="[]"
    [isLoading]="isLoading()"
    (close)="closeEjercicioModal()"
    (save)="saveEjercicioChanges()"
    (toggleDiaSemana)="onToggleDiaSemana($event)"
    (toggleEjercicio)="toggleEjercicio($event)">
  </app-modal-form>

  <!-- Modal de rutinas -->
  <app-modal-form
    [isOpen]="isRutinaModalOpen()"
    [modalType]="'rutina'"
    [isCreating]="isRutinaCreating()"
    [form]="rutinaEditForm()"
    [formFields]="getRutinaFormFields()"
    [ejercicios]="ejercicios()"
    [selectedEjercicios]="rutinaModalData()?.ejercicios || []"
    [isLoading]="isLoading()"
    (close)="closeRutinaModal()"
    (save)="saveRutinaChanges()"
    (toggleDiaSemana)="onToggleDiaSemana($event)"
    (toggleEjercicio)="toggleEjercicio($event)">
  </app-modal-form>

  <!-- Modal de mensajes -->
  <app-modal-form
    [isOpen]="isMensajeModalOpen()"
    [modalType]="'mensaje'"
    [isCreating]="isMensajeCreating()"
    [form]="mensajeEditForm()"
    [formFields]="getMensajeFormFields()"
    [ejercicios]="[]"
    [selectedEjercicios]="[]"
    [isLoading]="isLoading()"
    (close)="closeMensajeModal()"
    (save)="saveMensajeChanges()"
    (toggleDiaSemana)="onToggleDiaSemana($event)"
    (toggleEjercicio)="toggleEjercicio($event)"
    (responderMensaje)="responderMensaje($event)">
  </app-modal-form>
</div>
