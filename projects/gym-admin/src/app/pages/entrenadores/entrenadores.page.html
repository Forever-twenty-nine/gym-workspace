<div class="container mx-auto px-4 py-8">
  <h1 class="text-3xl font-bold text-white mb-6">Entrenadores</h1>
  
  <section class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    <!-- Card de Entrenadores -->
    <app-generic-card
      [config]="entrenadoresCardConfig"
      [items]="entrenadores()"
      [idField]="'id'"
      [canCreate]="false"
      (edit)="openDetailsModal($event)"
      (delete)="deleteEntrenador($event)">
    </app-generic-card>

    <!-- Card de Ejercicios -->
    <app-generic-card
      [config]="ejerciciosCardConfig"
      [items]="ejercicios()"
      [idField]="'id'"
      (create)="addSampleEjercicio()"
      (edit)="openEjercicioModal($event)"
      (delete)="deleteEjercicio($event)">
    </app-generic-card>

    <!-- Card de Rutinas -->
    <app-generic-card
      [config]="rutinasCardConfig"
      [items]="rutinas()"
      [idField]="'id'"
      (create)="addSampleRutina()"
      (edit)="openRutinaModal($event)"
      (delete)="deleteRutina($event)">
    </app-generic-card>

    <!-- Card de Mensajes -->
    <app-generic-card
      [config]="mensajesCardConfig"
      [items]="mensajesFiltrados()"
      [idField]="'id'"
      [canCreate]="false"
      (edit)="openMensajeModal($event)"
      (delete)="deleteMensaje($event)">
    </app-generic-card>

    <!-- Card de Conversaciones -->
  </section>

  <!-- Toasts -->
  <app-toast 
    [toasts]="toastService.toasts()" 
    (closeToast)="toastService.remove($event)">
  </app-toast>

  <!-- Modal de edición de entrenador -->
  <app-modal-form
    [isOpen]="isModalOpen()"
    [modalType]="'entrenador'"
    [isCreating]="isCreating()"
    [form]="editForm()"
    [formFields]="getFormFields()"
    [ejercicios]="ejercicios()"
    [selectedEjercicios]="[]"
    [isLoading]="isLoading()"
    [showCustomAction]="!isCreating() && modalData() !== null"
    [customActionLabel]="'Enviar Mensaje'"
    [customActionIcon]="'💬'"
    [showCustomAction2]="!isCreating() && modalData() !== null"
    [customAction2Label]="'Enviar Invitación'"
    [customAction2Icon]="'🤝'"
    (close)="closeModal()"
    (save)="saveChanges()"
    (customAction)="addMensaje()"
    (customAction2)="addInvitacion()"
    (marcarNotificacionLeida)="marcarNotificacionComoLeida($event)"
    (verMensaje)="abrirMensaje($event)"
    (responderMensaje)="responderMensaje($event)"
    (verConversacion)="abrirConversacion($event)"
    (marcarConversacionLeida)="marcarConversacionLeida($event)"
    (responderConversacion)="responderConversacion($event)"
    (toggleDiaSemana)="onToggleDiaSemana($event)"
    (toggleEjercicio)="toggleEjercicio($event)">
  </app-modal-form>

  <!-- Modal de ejercicios -->
  <app-modal-form
    [isOpen]="isEjercicioModalOpen()"
    [modalType]="'ejercicio'"
    [isCreating]="isEjercicioCreating()"
    [form]="ejercicioEditForm()"
    [formFields]="getEjercicioFormFields()"
    [ejercicios]="[]"
    [selectedEjercicios]="[]"
    [isLoading]="isLoading()"
    (close)="closeEjercicioModal()"
    (save)="saveEjercicioChanges()"
    (toggleDiaSemana)="onToggleDiaSemana($event)"
    (toggleEjercicio)="toggleEjercicio($event)">
  </app-modal-form>

  <!-- Modal de rutinas -->
  <app-modal-form
    [isOpen]="isRutinaModalOpen()"
    [modalType]="'rutina'"
    [isCreating]="isRutinaCreating()"
    [form]="rutinaEditForm()"
    [formFields]="getRutinaFormFields()"
    [ejercicios]="ejercicios()"
    [selectedEjercicios]="rutinaModalData()?.ejercicios || []"
    [isLoading]="isLoading()"
    (close)="closeRutinaModal()"
    (save)="saveRutinaChanges()"
    (toggleDiaSemana)="onToggleDiaSemana($event)"
    (toggleEjercicio)="toggleEjercicio($event)">
  </app-modal-form>

  <!-- Modal de mensajes -->
  <app-modal-form
    [isOpen]="mensajeManager.isModalOpen()"
    [modalType]="'mensaje'"
    [isCreating]="mensajeManager.isCreating()"
    [form]="mensajeManager.editForm()"
    [formFields]="getMensajeFormFields()"
    [ejercicios]="[]"
    [selectedEjercicios]="[]"
    [isLoading]="isLoading()"
    (close)="mensajeManager.closeModal()"
    (save)="saveMensaje()"
    (toggleDiaSemana)="onToggleDiaSemana($event)"
    (toggleEjercicio)="toggleEjercicio($event)"
    (responderMensaje)="responderMensaje($event)">
  </app-modal-form>

  <!-- Modal de invitaciones -->
  <app-modal-form
    [isOpen]="invitacionManager.isModalOpen()"
    [modalType]="'invitacion'"
    [isCreating]="invitacionManager.isCreating()"
    [form]="invitacionManager.editForm()"
    [formFields]="getInvitacionFormFields()"
    [ejercicios]="[]"
    [selectedEjercicios]="[]"
    [isLoading]="isLoading()"
    (close)="invitacionManager.closeModal()"
    (save)="saveInvitacion()"
    (toggleDiaSemana)="onToggleDiaSemana($event)"
    (toggleEjercicio)="toggleEjercicio($event)">
  </app-modal-form>
</div>
