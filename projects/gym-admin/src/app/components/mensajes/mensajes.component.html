<div class="space-y-3">
  <div class="flex items-center justify-between mb-2">
    <h4 class="text-sm font-semibold text-blue-900">Mensajes</h4>
    <button (click)="open.emit()" class="text-sm text-blue-600 hover:underline">Abrir</button>
  </div>

  <div class="max-h-40 overflow-y-auto bg-blue-50 rounded p-2 border border-blue-100 space-y-2">
    @if (mensajes() && mensajes().length > 0) {
      @for (m of mensajes(); track m.id) {
        <div class="p-2 rounded bg-white shadow-sm">
          <div class="text-xs text-gray-600">De: {{ m.remitenteNombre || m.remitenteId }}</div>
          <div class="text-sm text-gray-800 font-medium">{{ m.contenido }}</div>
          <div class="text-xs text-gray-500">{{ m.fecha | date:'short' }}</div>
        </div>
      }
    } @else {
      <div class="text-center py-4 text-sm text-blue-700">No hay mensajes</div>
    }
  </div>

  <div class="mt-2 flex gap-2">
    <input [(ngModel)]="mensajeTexto" placeholder="Escribe un mensaje..." class="flex-1 px-3 py-2 border rounded" />
    <button (click)="onEnviar()" class="px-3 py-2 bg-blue-600 text-white rounded">Enviar</button>
  </div>
</div>
