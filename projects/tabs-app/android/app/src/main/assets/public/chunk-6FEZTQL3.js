import{a as Y,c as A,n as G}from"./chunk-FWXQILRK.js";import{b as D}from"./chunk-PR3ZWVFR.js";import{$ as N,A as _,B as x,D as P,E as y,F as w,Fa as B,Ga as W,I as M,J as C,N as S,S as k,T as F,U as T,V as L,W as V,ga as O,k as n,l as f,m as I,na as j,o as h,qa as z,r as l,s as a,t as r,u as d,w as c,wa as R,x as v,y as b,z as m}from"./chunk-6EBX5GJW.js";import"./chunk-NFDXTMMQ.js";import"./chunk-Y4AN3NJQ.js";import"./chunk-2FYEZH7E.js";import"./chunk-Q6Z4NPHT.js";import"./chunk-HCS2FYI5.js";import"./chunk-XF2MK4EZ.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-2YSZFPCQ.js";import"./chunk-57YRIO75.js";import"./chunk-LRFGNCHE.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{h as E}from"./chunk-B7O3QC5Z.js";function q(i,o){if(i&1&&(a(0,"div",10)(1,"p",16),m(2),r()()),i&2){let u=v();n(2),_(u.emailError)}}function H(i,o){if(i&1&&(a(0,"div",10)(1,"p",17),m(2),r()()),i&2){let u=v();n(2),_(u.successMessage)}}function J(i,o){i&1&&d(0,"ion-spinner",18)}var ae=(()=>{let o=class o{constructor(t,s){this.authService=t,this.router=s,this.email="",this.emailError="",this.successMessage="",this.isLoading=!1,Y({arrowBackOutline:A,mailOutline:G})}goToLogin(){this.router.navigate(["/login"])}validateEmail(){this.emailError="",this.successMessage="",this.email&&!this.isValidEmail(this.email)&&(this.emailError="Por favor, ingresa un email v\xE1lido")}isValidEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}isEmailValid(){return this.email.length>0&&this.isValidEmail(this.email)&&!this.emailError}isEmailInvalid(){return this.email.length>0&&(!this.isValidEmail(this.email)||!!this.emailError)}resetPassword(){return E(this,null,function*(){if(!this.isEmailValid()){this.emailError="Por favor, ingresa un email v\xE1lido";return}this.isLoading=!0,this.emailError="",this.successMessage="";try{let t=yield this.authService.resetPassword(this.email);t.success?(this.successMessage=t.message,setTimeout(()=>{this.goToLogin()},3e3)):this.emailError=t.message}catch(t){console.error("Error al enviar enlace de recuperaci\xF3n:",t),this.emailError="Ocurri\xF3 un error inesperado. Int\xE9ntalo de nuevo."}finally{this.isLoading=!1}})}};o.\u0275fac=function(s){return new(s||o)(f(D),f(S))},o.\u0275cmp=I({type:o,selectors:[["app-forgot-password"]],decls:21,vars:12,consts:[["slot","start","fill","clear",1,"fixed","top-4","left-2","z-10","text-white",3,"click"],["name","arrow-back-outline"],[1,"ion-padding",2,"--background","url('/assets/images/bg.jpg') no-repeat center center / cover",3,"fullscreen"],[1,"fixed","inset-0","z-0"],[1,"w-full","h-full","bg-[url('/assets/images/bg.jpg')]","bg-cover","bg-center","blur-xs"],[1,"absolute","inset-0","bg-gradient-to-b","from-transparent","via-black/70","to-black","pointer-events-none"],[1,"z-10","p-2","relative","flex","items-start","justify-center"],[1,"mt-24","w-full"],[1,"text-white","font-semibold","font-heading","text-4xl","mb-8"],[1,"mb-6","text-lg","text-white/80"],[1,"mb-4"],["name","mail-outline","slot","start","size","default","aria-hidden","true",1,"mr-2"],["type","email","name","email","placeholder","Ingresa tu email",3,"ngModelChange","ionInput","ngModel","clearInput"],["class","mb-4",4,"ngIf"],["expand","block","fill","solid","size","large","shape","round","color","primary",1,"!mt-6","mb-6",3,"click","disabled"],["name","crescent","class","mr-2",4,"ngIf"],[1,"text-red-400","text-sm"],[1,"text-green-400","text-sm"],["name","crescent",1,"mr-2"]],template:function(s,e){s&1&&(a(0,"ion-button",0),c("click",function(){return e.goToLogin()}),d(1,"ion-icon",1),r(),a(2,"ion-content",2)(3,"div",3),d(4,"div",4)(5,"div",5),r(),a(6,"div",6)(7,"div",7)(8,"h1",8),m(9," Recuperar Contrase\xF1a "),r(),a(10,"p",9),m(11," Ingresa tu email y te enviaremos un enlace para restablecer tu contrase\xF1a. "),r(),a(12,"form")(13,"ion-item",10),d(14,"ion-icon",11),a(15,"ion-input",12),w("ngModelChange",function(p){return y(e.email,p)||(e.email=p),p}),c("ionInput",function(){return e.validateEmail()}),r()(),h(16,q,3,1,"div",13)(17,H,3,1,"div",13),r(),a(18,"ion-button",14),c("click",function(){return e.resetPassword()}),h(19,J,1,0,"ion-spinner",15),m(20),r()()()()),s&2&&(n(2),l("fullscreen",!0),n(11),b("item-valid",e.isEmailValid())("item-invalid",e.isEmailInvalid()),n(2),P("ngModel",e.email),l("clearInput",!0),n(),l("ngIf",e.emailError),n(),l("ngIf",e.successMessage),n(),l("disabled",!e.isEmailValid()||e.isLoading),n(),l("ngIf",e.isLoading),n(),x(" ",e.isLoading?"Enviando...":"Enviar Enlace"," "))},dependencies:[C,M,j,z,W,O,B,R,N,V,k,F,L,T],styles:[".text-green-400[_ngcontent-%COMP%], .text-red-400[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}"]});let i=o;return i})();export{ae as ForgotPasswordPage};
