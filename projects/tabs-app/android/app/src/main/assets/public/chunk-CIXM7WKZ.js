import{a as $,d as H,e as K,g as W,j as Y,o as Z,q as ee,s as te}from"./chunk-FWXQILRK.js";import{b as Q}from"./chunk-PR3ZWVFR.js";import{$ as w,A as f,C as I,Fa as G,G as x,Ga as X,Ia as q,N,S as R,V as j,Z as y,g as v,ga as F,h as _,ha as L,i as b,k as a,l as C,m as D,na as k,p as c,q as m,qa as B,r as S,ra as U,s as i,t as o,ta as V,u as p,v as O,va as z,w as h,x as u,z as l,za as J}from"./chunk-6EBX5GJW.js";import"./chunk-NFDXTMMQ.js";import"./chunk-Y4AN3NJQ.js";import"./chunk-2FYEZH7E.js";import"./chunk-Q6Z4NPHT.js";import"./chunk-HCS2FYI5.js";import"./chunk-XF2MK4EZ.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-2YSZFPCQ.js";import"./chunk-57YRIO75.js";import"./chunk-LRFGNCHE.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{a as P,b as A,h as E}from"./chunk-B7O3QC5Z.js";var M=function(t){return t.BAJAR_PESO="Bajar Peso",t.AUMENTAR_MUSCULO="Aumentar Musculo",t.MANTENER_PESO="Mantener Peso",t}(M||{});function ie(t,d){t&1&&(i(0,"span"),l(1,"Datos Personales"),o())}function ne(t,d){t&1&&(i(0,"span"),l(1,"Tu Objetivo"),o())}function oe(t,d){t&1&&(i(0,"span"),l(1,"Completaremos tu perfil"),o())}function re(t,d){t&1&&(i(0,"span"),l(1,"\xBFQu\xE9 quieres lograr?"),o())}function ae(t,d){if(t&1&&(i(0,"ion-card",20)(1,"p",21),p(2,"ion-icon",22),i(3,"span",23),l(4),o()()()),t&2){let s=u(2);a(4),f(s.getRoleDescription(s.formData().role))}}function le(t,d){if(t&1){let s=O();i(0,"div")(1,"ion-item",11),p(2,"ion-icon",12),i(3,"ion-label",13),l(4," Nombre Completo * "),o(),i(5,"ion-input",14),h("ngModelChange",function(r){v(s);let e=u();return _(e.updateFormField("nombre",r))}),o()(),i(6,"ion-item",11),p(7,"ion-icon",15),i(8,"ion-label",13),l(9," Tipo de Usuario * "),o(),i(10,"ion-select",16),h("ngModelChange",function(r){v(s);let e=u();return _(e.updateFormField("role",r))}),i(11,"ion-select-option",17),l(12,"Cliente"),o(),i(13,"ion-select-option",18),l(14,"Entrenador"),o(),i(15,"ion-select-option",19),l(16,"Gimnasio"),o()()(),c(17,ae,5,1,"ion-card",20),o()}if(t&2){let s=u();a(5),S("ngModel",s.formData().nombre),a(5),S("ngModel",s.formData().role),a(7),m(s.formData().role?17:-1)}}function se(t,d){if(t&1&&(i(0,"ion-card",20)(1,"p",21),p(2,"ion-icon",30),i(3,"span",23),l(4),o()()()),t&2){let s=u(2);a(4),f(s.getObjetivoDescription(s.formData().objetivo))}}function de(t,d){if(t&1){let s=O();i(0,"div")(1,"ion-item",24),p(2,"ion-icon",25),i(3,"ion-label",13),l(4," Objetivo Principal * "),o(),i(5,"ion-select",26),h("ngModelChange",function(r){v(s);let e=u();return _(e.updateFormField("objetivo",r))}),i(6,"ion-select-option",27),l(7),o(),i(8,"ion-select-option",28),l(9),o(),i(10,"ion-select-option",29),l(11),o()()(),c(12,se,5,1,"ion-card",20),o()}if(t&2){let s=u();a(5),S("ngModel",s.formData().objetivo),a(2),f(s.objetivos.BAJAR_PESO),a(2),f(s.objetivos.AUMENTAR_MUSCULO),a(2),f(s.objetivos.MANTENER_PESO),a(),m(s.formData().role?12:-1)}}function ce(t,d){if(t&1&&(i(0,"ion-text",9)(1,"p",31),l(2),o()()),t&2){let s=u();a(2),f(s.errorMessage())}}function me(t,d){t&1&&(i(0,"span"),l(1,"Configurando..."),o())}function ue(t,d){t&1&&(i(0,"span"),l(1,"Continuar"),o())}function pe(t,d){t&1&&(i(0,"span"),l(1,"Finalizar"),o())}var g={STEPS:{DATOS_PERSONALES:1,OBJETIVO:2},MAX_STEPS:{CLIENTE:2,OTROS:1}},Te=(()=>{let d=class d{updateFormField(n,r){this.formData.update(e=>A(P({},e),{[n]:r}))}constructor(n,r){this.authService=n,this.router=r,this.currentStep=b(g.STEPS.DATOS_PERSONALES),this.totalSteps=b(g.MAX_STEPS.CLIENTE),this.formData=b({nombre:"",role:"cliente",objetivo:""}),this.errorMessage=b(""),this.isLoading=b(!1),this.progress=x(()=>this.currentStep()/this.totalSteps()*100),this.isClient=x(()=>this.formData().role==="cliente"),this.showStep2=x(()=>this.currentStep()===g.STEPS.OBJETIVO&&this.isClient()),this.objetivos=M,this.validationRules={nombre:e=>e.trim()?e.trim().length<2?"El nombre debe tener al menos 2 caracteres":null:"Por favor, ingresa tu nombre completo",role:e=>e?null:"Por favor, selecciona tu tipo de usuario",objetivo:(e,T)=>T==="cliente"&&!e?"Por favor, selecciona tu objetivo principal":null},$({personOutline:ee,peopleOutline:Z,bookmarkOutline:K,checkmarkCircleOutline:W,arrowForwardOutline:H,fitnessOutline:Y,rocketOutline:te}),this.initializeForTesting()}initializeForTesting(){return E(this,null,function*(){this.authService.currentUser$()||(yield this.authService.simulateAuthenticatedUser())})}nextStep(){if(this.currentStep()===g.STEPS.DATOS_PERSONALES){if(!this.validateStep1())return;if(this.formData().role!=="cliente"){this.totalSteps.set(g.MAX_STEPS.OTROS),this.completeOnboarding();return}this.totalSteps.set(g.MAX_STEPS.CLIENTE),this.currentStep.set(g.STEPS.OBJETIVO)}else if(this.currentStep()===g.STEPS.OBJETIVO){if(!this.validateStep2())return;this.completeOnboarding()}}validateField(n,r,e){return n==="objetivo"&&e?this.validationRules.objetivo(r,e):n==="nombre"?this.validationRules.nombre(r):n==="role"?this.validationRules.role(r):null}validateStep1(){let n=this.formData(),r=this.validateField("nombre",n.nombre);if(r)return this.errorMessage.set(r),!1;let e=this.validateField("role",n.role);return e?(this.errorMessage.set(e),!1):(this.errorMessage.set(""),!0)}validateStep2(){let n=this.formData(),r=this.validateField("objetivo",n.objetivo,n.role);return r?(this.errorMessage.set(r),!1):(this.errorMessage.set(""),!0)}completeOnboarding(){return E(this,null,function*(){this.isLoading.set(!0),this.errorMessage.set("");try{let n=this.formData(),r={nombre:n.nombre,role:n.role};n.role==="cliente"&&n.objetivo&&(r.objetivo=n.objetivo);let e=yield this.authService.updateProfile(r);e.success?this.redirectToRolePage():(this.errorMessage.set(e.message||"Error al completar el perfil"),this.isLoading.set(!1))}catch{this.errorMessage.set("Error al completar el perfil. Intenta nuevamente."),this.isLoading.set(!1)}})}redirectToRolePage(){switch(this.formData().role){case"cliente":this.router.navigate(["/cliente-tabs"]);break;case"entrenador":this.router.navigate(["/entrenador-tabs"]);break;case"gimnasio":this.router.navigate(["/gimnasio-tabs"]);break;default:this.router.navigate(["/welcome"])}}getRoleDescription(n){switch(n){case"cliente":return"Acceso a entrenamientos y seguimiento de progreso";case"entrenador":return"Gesti\xF3n de clientes y creaci\xF3n de rutinas";case"gimnasio":return"Administraci\xF3n completa del gimnasio";default:return""}}getObjetivoDescription(n){switch(n){case"BAJAR_PESO":return"Te ayudaremos a alcanzar tu peso ideal de forma saludable";case"AUMENTAR_MUSCULO":return"Rutinas espec\xEDficas para ganar masa muscular";case"MANTENER_PESO":return"Mant\xE9n tu peso actual con ejercicios de mantenimiento";default:return""}}getProgress(){return this.progress()}};d.\u0275fac=function(r){return new(r||d)(C(Q),C(N))},d.\u0275cmp=D({type:d,selectors:[["app-onboarding"]],decls:24,vars:13,consts:[[1,"ion-padding","bg-[var(--brand-light-color)]",3,"fullscreen"],[1,"p-2"],[1,"p-4","pb-0","mb-10"],["color","medium"],[1,"text-sm","text-[var(--brand-secondary-color)]","text-center","mb-2"],["color","primary",3,"value"],[1,"text-3xl","font-heading","font-semibold","text-center","mb-8"],[1,"text-[var(--brand-primary-color)]","text-3xl","font-semibold","font-heading","text-center"],[1,"text-[var(--brand-secondary-color)]","text-center","text-lg","mb-8"],["color","danger"],["expand","block","fill","solid","size","large","shape","round","color","primary",1,"!mt-8",3,"click","disabled"],[1,"mb-4","rounded-lg"],["name","person-outline","slot","start","size","default","aria-hidden","true",1,"mr-3","pt-6"],["position","stacked"],["type","text","placeholder","Ingresa tu nombre completo","maxlength","50",3,"ngModelChange","ngModel"],["name","people-outline","slot","start","size","default","aria-hidden","true",1,"mr-3","pt-6"],["placeholder","Selecciona tu rol",2,"--placeholder-color","var(--ion-color-medium)",3,"ngModelChange","ngModel"],["value","cliente"],["value","entrenador"],["value","gimnasio"],["color","warning",1,"!mx-0"],[1,"text-center","my-4","mx-0","p-3","text-base"],["name","fitness-outline"],[1,"block"],[1,"mb-4","rounded-lg","bg-[--ion-color-light]"],["name","bookmark-outline","slot","start","size","default","aria-hidden","true",1,"mr-3","pt-6"],["placeholder","\xBFCu\xE1l es tu meta?",1,"",3,"ngModelChange","ngModel"],["value","BAJAR_PESO"],["value","AUMENTAR_MUSCULO"],["value","MANTENER_PESO"],["name","rocket-outline"],[1,"text-center","text-[var(--ion-color-danger)]","my-4","mx-0","text-sm"]],template:function(r,e){r&1&&(i(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"ion-text",3)(4,"p",4),l(5),o()(),p(6,"ion-progress-bar",5),o(),i(7,"h1",6),l(8," \xA1Bienvenido a "),p(9,"br"),l(10,"GymApp! "),o(),i(11,"h2",7),c(12,ie,2,0,"span"),c(13,ne,2,0,"span"),o(),i(14,"p",8),c(15,oe,2,0,"span"),c(16,re,2,0,"span"),o(),c(17,le,18,3,"div"),c(18,de,13,5,"div"),c(19,ce,3,1,"ion-text",9),i(20,"ion-button",10),h("click",function(){return e.nextStep()}),c(21,me,2,0,"span")(22,ue,2,0,"span")(23,pe,2,0,"span"),o()()()),r&2&&(S("fullscreen",!0),a(5),I(" Paso ",e.currentStep()," de ",e.totalSteps()," "),a(),S("value",e.getProgress()/100),a(6),m(e.currentStep()===1?12:-1),a(),m(e.currentStep()===2?13:-1),a(2),m(e.currentStep()===1?15:-1),a(),m(e.currentStep()===2?16:-1),a(),m(e.currentStep()===1?17:-1),a(),m(e.showStep2()?18:-1),a(),m(e.errorMessage()?19:-1),a(),S("disabled",e.isLoading()),a(),m(e.isLoading()?21:e.currentStep()<e.totalSteps()&&e.formData().role==="cliente"?22:23))},dependencies:[k,L,B,U,X,F,J,G,q,z,V,w,R,y,j],encapsulation:2});let t=d;return t})();export{Te as OnboardingPage};
