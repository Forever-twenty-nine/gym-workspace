<ion-header [translucent]="true" class="px-4">
  <ion-toolbar class="">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/entrenado-tabs/dashboard" text="" icon="arrow-back-outline"></ion-back-button>
    </ion-buttons>
    <ion-title class="text-center flex-1 text-base">Perfil</ion-title>
    <ion-buttons slot="end">
      <ion-button fill="clear">
        <ion-icon name="notifications-outline" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">

  @if (currentUser(); as user) {
    <!-- Tarjeta de información personal compacta -->
    <section class="text-center mb-6">
      <!-- Foto -->
      <ion-avatar class="!w-24 !h-24 mx-auto mb-4">
        <img src="../../../assets/images/test-foto.png" alt="" class="">
      </ion-avatar>
      <p class="font-heading font-bold text-2xl mb-1 ">
        {{ user.nombre }}
      </p>
      <p class="text-gray-600 text-sm mb-1 ">
        Miembro desde: 19/10/2025
      </p>
    </section>

    <ion-card class="">
      <ion-card-content class="gym-box-secondary bg-[var(--brand-color-primary)] p-2">
        <div class="flex flex-col gap-2 p-2 items-start">
          <!-- Plan -->
          @if (user.plan) {
            <div class="flex justify-center items-center">
              <div>
                <span class="gym-box-primary px-2 py-0.5 mr-2 rounded-full text-xs">
                  Pro
                </span>
                <span class="text-white font-heading font-bold text-lg">
                  ¡Pásate a Premium y desbloquea más funciones!
                </span>
              </div>
            </div>


          }
        </div>
      </ion-card-content>
    </ion-card>

    <!-- Información personal -->
    <section class="p-2 mt-6">
      <!-- titulo -->
      <h2 class=" font-heading text-lg font-semibold flex justify-between items-center mb-3">
        Información de cuenta
      </h2>
      <div class="flex flex-col gap-2 p-4 items-start bg-gray-400/50 rounded-2xl">
        <!-- Email -->
        @if (user.email) {
          <div class="flex items-start w-full gap-2 p-2">
            <div class="flex flex-col  border-b border-solid border-gray-400 w-full pb-3">
              <span class="text-gray-500 text-xs font-heading">
                Email
              </span>
              <span class="">
                {{ user.email }}
              </span>
            </div>
          </div>
        }

        @if (user.gimnasioId) {
          <div class="info-item">
            <ion-icon name="fitness-outline" color="primary"></ion-icon>
            <div class="info-text">
              <span class="info-label">Gimnasio</span>
              <span class="info-value">{{ user.gimnasioId }}</span>
            </div>
          </div>
        }

        @if (user.entrenadorId) {
          <div class="info-item">
            <ion-icon name="person-outline" color="primary"></ion-icon>
            <div class="info-text">
              <span class="info-label">Entrenador</span>
              <span class="info-value">{{ user.entrenadorId }}</span>
            </div>
          </div>
        }

        <!-- Usuario -->
        <div class="flex items-start gap-2 p-2 w-full">
            <div class="flex flex-col  border-b border-solid border-gray-400 w-full pb-3">
              <span class="text-gray-500 text-xs font-heading">
                ID Usuario
              </span>
              <span class="text-sm mt-1">
                {{ user.uid }}
              </span>
            </div>
        </div>

        <!-- Plan -->
        @if (user.plan) {
          <div class="flex items-start gap-2 p-2 w-full">
            <div class="flex flex-col  border-b border-solid border-gray-400 w-full pb-3">
              <span class="text-gray-500 text-xs font-heading">
                Plan
              </span>
              <span class="text-sm mt-1">
                {{ user.plan }}
              </span>
            </div>
          </div>

        }

      </div>
    </section>



    <!-- Logout -->
    <section class="">
      <div class="px-2">
        <ion-button
          expand="block"
          fill="solid"
          size="default"
          shape="round"
          color="medium"
          (click)="logout()">
          <ion-icon name="log-out-outline" slot="start"></ion-icon>
          Cerrar Sesión
        </ion-button>
      </div>
    </section>

    <!-- <ion-card class="profile-card">
      <ion-card-content class="profile-content">
        <div class="profile-header">
          <ion-avatar class="profile-avatar">
            <div class="avatar-placeholder">
              {{ getIniciales(user.nombre) }}
            </div>
          </ion-avatar>
          <div class="profile-info">
            <h2></h2>
            <ion-badge [color]="getBadgeColor(user.role)">
              <ion-icon name="shield-outline"></ion-icon>
              {{ getRoleDisplayName(user.role) }}
            </ion-badge>
          </div>
        </div>
      </ion-card-content>
    </ion-card> -->

    <!-- Información de contacto en grid -->
    <!-- <ion-card class="info-card">
      <ion-card-header class="card-header-compact">
        <ion-card-title>
          <ion-icon name="person-outline"></ion-icon>
          Información Personal
        </ion-card-title>
      </ion-card-header>
      <ion-card-content class="info-grid">
        @if (user.email) {
          <div class="info-item">
            <ion-icon name="mail-outline" color="primary"></ion-icon>
            <div class="info-text">
              <span class="info-label">Email</span>
              <span class="info-value">{{ user.email }}</span>
            </div>
          </div>
        }

        @if (user.gimnasioId) {
          <div class="info-item">
            <ion-icon name="fitness-outline" color="primary"></ion-icon>
            <div class="info-text">
              <span class="info-label">Gimnasio</span>
              <span class="info-value">{{ user.gimnasioId }}</span>
            </div>
          </div>
        }

        @if (user.entrenadorId) {
          <div class="info-item">
            <ion-icon name="person-outline" color="primary"></ion-icon>
            <div class="info-text">
              <span class="info-label">Entrenador</span>
              <span class="info-value">{{ user.entrenadorId }}</span>
            </div>
          </div>
        }

        @if (user.plan) {
          <div class="info-item">
            <ion-icon name="trophy-outline" color="tertiary"></ion-icon>
            <div class="info-text">
              <span class="info-label">Plan</span>
              <span class="info-value">{{ user.plan }}</span>
            </div>
          </div>
        }

        <div class="info-item">
          <ion-icon name="shield-outline" color="primary"></ion-icon>
          <div class="info-text">
            <span class="info-label">ID Usuario</span>
            <span class="info-value user-id">{{ user.uid }}</span>
          </div>
        </div>
      </ion-card-content>
    </ion-card> -->

    <!-- Acciones de la cuenta -->
    <!-- <ion-card class="account-card">
      <ion-card-content class="account-content">
        <ion-button
          expand="block"
          color="danger"
          fill="outline"
          (click)="logout()">
          <ion-icon name="log-out-outline" slot="start"></ion-icon>
          Cerrar Sesión
        </ion-button>
      </ion-card-content>
    </ion-card> -->

  } @else {
    <ion-card>
      <ion-card-content>
        <p>No se pudo cargar la información del usuario.</p>
        <ion-button expand="block" (click)="logout()">
          Volver al inicio
        </ion-button>
      </ion-card-content>
    </ion-card>
  }
</ion-content>
