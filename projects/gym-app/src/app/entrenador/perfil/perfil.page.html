<ion-header [translucent]="true">
  <ion-toolbar>
    <!-- <ion-title>Mi Perfil</ion-title> -->
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Mi Perfil</ion-title>
    </ion-toolbar>
  </ion-header>

  @if (currentUser(); as user) {
    <!-- Tarjeta de información personal compacta -->
    <ion-card class="profile-card">
      <ion-card-content class="profile-content">
        <div class="profile-header">
          <ion-avatar class="profile-avatar">
            <div class="avatar-placeholder">
              {{ getIniciales(user.nombre) }}
            </div>
          </ion-avatar>
          <div class="profile-info">
            <h2>{{ user.nombre }}</h2>
            <ion-badge [color]="getBadgeColor(user.role)">
              <ion-icon name="shield-outline"></ion-icon>
              {{ getRoleDisplayName(user.role) }}
            </ion-badge>
          </div>
        </div>
      </ion-card-content>
    </ion-card>

    <!-- Información de contacto en grid -->
    <ion-card class="info-card">
      <ion-card-header class="card-header-compact">
        <ion-card-title>
          <ion-icon name="person-outline"></ion-icon>
          Información Personal
        </ion-card-title>
      </ion-card-header>
      <ion-card-content class="info-grid">
        @if (user.email) {
          <div class="info-item">
            <ion-icon name="mail-outline" color="primary"></ion-icon>
            <div class="info-text">
              <span class="info-label">Email</span>
              <span class="info-value">{{ user.email }}</span>
            </div>
          </div>
        }

        @if (user.gimnasioId) {
          <div class="info-item">
            <ion-icon name="fitness-outline" color="primary"></ion-icon>
            <div class="info-text">
              <span class="info-label">Gimnasio</span>
              <span class="info-value">{{ user.gimnasioId }}</span>
            </div>
          </div>
        }

        @if (user.entrenadorId) {
          <div class="info-item">
            <ion-icon name="person-outline" color="primary"></ion-icon>
            <div class="info-text">
              <span class="info-label">Entrenador</span>
              <span class="info-value">{{ user.entrenadorId }}</span>
            </div>
          </div>
        }

        @if (user.plan) {
          <div class="info-item">
            <ion-icon name="trophy-outline" color="tertiary"></ion-icon>
            <div class="info-text">
              <span class="info-label">Plan</span>
              <span class="info-value">{{ user.plan }}</span>
            </div>
          </div>
        }

        <div class="info-item">
          <ion-icon name="shield-outline" color="primary"></ion-icon>
          <div class="info-text">
            <span class="info-label">ID Usuario</span>
            <span class="info-value user-id">{{ user.uid }}</span>
          </div>
        </div>
      </ion-card-content>
    </ion-card>

    <!-- Acciones de la cuenta -->
    <ion-card class="account-card">
      <ion-card-content class="account-content">
        <ion-button
          expand="block"
          color="danger"
          fill="outline"
          (click)="logout()">
          <ion-icon name="log-out-outline" slot="start"></ion-icon>
          Cerrar Sesión
        </ion-button>
      </ion-card-content>
    </ion-card>

  } @else {
    <ion-card>
      <ion-card-content>
        <p>No se pudo cargar la información del usuario.</p>
        <ion-button expand="block" (click)="logout()">
          Volver al inicio
        </ion-button>
      </ion-card-content>
    </ion-card>
  }
</ion-content>